function hardRandomizer(t){t=15<t?15:t;var e={time:0,note:"C4",velocity:.9};let o=Object.assign({},e);var n=[],r=[];let i="";var a,l;for(let e=0;e<t;e++){for(;a=Math.floor(4*Math.random()),l=Math.floor(4*Math.random()),i="0:"+a+":"+l,n.includes(i););n.push(i)}for(i in n.sort(),n)o.time=n[i],r.push(o),o={...e};return r}function mediumRandomizer(t){t=15<t?15:t;var e={time:0,note:"C4",velocity:.9};let o=Object.assign({},e);var n=[],r=[];let i="";var a,l,s=[0,2];for(let e=0;e<t;e++){for(;a=Math.floor(4*Math.random()),l=s[Math.floor(2*Math.random())],i="0:"+a+":"+l,n.includes(i););n.push(i)}for(i in n.sort(),n)o.time=n[i],r.push(o),o={...e};return r}function randomizerExtender(t,o,n=!0){var r,i=[];let a=0,l=0;for(let e=0;e<o;e++){for(const s in r=mediumRandomizer(t))e%2!=0&&n?((l={...a[s]}).time=l.time.replace("0:",e+":"),l.velocity=0):(l={...r[s]}).time=l.time.replace("0:",e+":"),i.push(l);a=r}return console.log(i),i}function test(){alert("hierfg")}function launch(e){e()}launch(test),alert("I live at the end of the file!"),alert("I live of the file!xf");const AMinorScale=["A","B","C","D","E","F","G"],AllNotes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],FourOnTheFloorTest=[{time:"0:0:0",note:"C4",velocity:.9},{time:"0:1:0",note:"C4",velocity:.9},{time:"0:2:0",note:"C4",velocity:.9},{time:"0:3:0",note:"C4",velocity:.9},{time:"1:0:0",note:"C4",velocity:0},{time:"1:1:0",note:"C4",velocity:0},{time:"1:2:0",note:"C4",velocity:0},{time:"1:3:0",note:"C4",velocity:0}],StaticNotes=[{time:0,note:"C3",velocity:.9},{time:"0:2",note:"G3",velocity:.5},{time:"0:3:1",note:"C4",velocity:.5},{time:"0:3:3",note:"C4",velocity:.5}],STATIC_LIBRARY=[AMinorScale,AllNotes,FourOnTheFloorTest,StaticNotes];let synth=(new Tone.Synth).toDestination();const BPM=150;let tempo=BPM;const reverb=new Tone.Reverb({decay:4,wet:.2,preDelay:0}),effect=(reverb.generate(),new Tone.FeedbackDelay(Math.floor(1)+"n",.5));effect.wet.value=.2,synth.set({voice0:{oscillator:{type:"triangle"},volume:-30,envelope:{attack:.005,release:.05,sustain:1}},voice1:{volume:-20,envelope:{attack:.005,release:.05,sustain:1}}}),effect.connect(reverb),reverb.connect(Tone.Destination),Tone.Transport.bpm.value=tempo,Tone.start();let currentNote=0;function tonejsLoop(){new Tone.Loop(e=>{7===currentNote&&(currentNote=0),synth.triggerAttackRelease(AMinorScale[currentNote]+"4","16n",e),currentNote++},"16n").start(0)}let score=0,noteWindow=0,openTime=0,closeTime=0,delay=480,delaySlider=document.getElementById("delay"),tempoSlider=document.getElementById("tempo"),scoreBoard=document.getElementById("score"),scoreResult=document.getElementById("scoreResult"),notesInMeasure=5;function tonejsPart(o,t,e=randomizerExtender(t,16),n=30,r=90){const i=(new Tone.Synth).toDestination();let a=0;let l=[document.getElementById("paw-left"),document.getElementById("paw-right")];var s=new Tone.Part((e,t)=>{i.triggerAttackRelease(t.note,"16n",e,t.velocity,2),i&&(noteTrigger(o,l[0],t.velocity),noteRelease(o+50,l[0],t.velocity)),i&&0==t.velocity&&(inputOpen(o-n),inputClose(o+r)),a++},FourOnTheFloorTest).start("2m");return Tone.Transport.scheduleRepeat(e=>{score>7*t&&(party.confetti(scoreBoard,{count:party.variation.range(20,40)}),scoreResult.innerHTML="You got "+score+" out of "+8*t+"!!",score=0)},"19m","0m"),s}function tonejsDrums(){const t=new Tone.MembraneSynth({volume:4}).toDestination();var e=new Tone.Part(function(e){t.triggerAttackRelease("C1","8n",e)},[{time:"0:0"},{time:"0:1"},{time:"0:2"},{time:"0:3"}]).start(0);return e.loop=!0,e}async function waitForInput(){await Tone.start()}async function noteTrigger(e,t,o){await waitForNote(e),o&&(t.style.backgroundPositionX="-800px")}async function noteRelease(e,t,o){await waitForNote(e),o&&(t.style.backgroundPositionX="0px")}function inputOpen(e){console.log("open"),openTime=+new Date,openTime+=e}function inputClose(e){console.log("close"),closeTime=+new Date,closeTime+=e}function waitForNote(t){return new Promise(e=>{setTimeout(()=>{e("")},t)})}document.getElementById("liveDelay").innerHTML=delay,document.getElementById("liveTempo").innerHTML=tempo;let mainSong=tonejsPart(delay,notesInMeasure),click=tonejsDrums(),firstRun=!0;document.getElementById("play-button").addEventListener("click",e=>{"started"!==Tone.Transport.state&&console.log("-- new session --\n\n"),waitForInput(),mainSong.disposed&&!firstRun&&(Tone.Transport.bpm.value=tempo,mainSong=tonejsPart(delay,notesInMeasure),click=tonejsDrums()),Tone.Transport.toggle(),console.log(Tone.Transport.state),mainSong.disposed||firstRun||"stopped"!==Tone.Transport.state||(mainSong.dispose(),click.dispose(),document.getElementById("paw-left").style.backgroundPositionX="0px",score=0),firstRun=!1}),document.addEventListener("keydown",e=>{if(" "===e.key&&(document.getElementById("blueSquare").style.backgroundColor="green",e=+new Date,console.log("Time between actual input and window open: ",e-openTime),e>=openTime)&&e<=closeTime)return score++,scoreBoard.innerHTML="Score: "+score,console.log(score),document.getElementById("score").classList.add("scored"),new Promise(e=>{setTimeout(()=>{scoreBoard.classList.remove("scored"),e(0)},90)})}),document.addEventListener("keyup",e=>{" "===e.key&&(document.getElementById("blueSquare").style.backgroundColor="blue")}),delaySlider.addEventListener("change",function(){delay=delaySlider.value,document.getElementById("liveDelay").innerHTML=delay}),tempoSlider.addEventListener("change",function(){tempo=tempoSlider.value,document.getElementById("liveTempo").innerHTML=tempo});export{STATIC_LIBRARY};